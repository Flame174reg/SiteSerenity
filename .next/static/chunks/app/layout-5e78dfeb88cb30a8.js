(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{3673:()=>{},4200:(e,n,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.t.bind(s,3673,23)),Promise.resolve().then(s.bind(s,4592)),Promise.resolve().then(s.bind(s,5455)),Promise.resolve().then(s.bind(s,4580))},4580:(e,n,s)=>{"use strict";s.d(n,{default:()=>l});var t=s(5155);function l(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none fixed inset-0 -z-10 hidden sm:block bg-center bg-cover opacity-90 [background-image:url('/bg-light.webp')] dark:[background-image:url('/bg-dark.webp')]"}),(0,t.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none fixed inset-0 -z-10 sm:hidden bg-center bg-cover opacity-90 [background-image:url('/bg-light-mobile.webp')] dark:[background-image:url('/bg-dark-mobile.webp')]"}),(0,t.jsx)("div",{className:"fixed inset-0 -z-20 bg-gradient-to-b from-transparent via-black/10 to-black/60"}),(0,t.jsx)("div",{"aria-hidden":!0,className:"fixed inset-0 -z-15 pointer-events-none",style:{background:"radial-gradient(800px 400px at 10% 20%, rgba(124,58,237,0.10), transparent)"}})]})}},4592:(e,n,s)=>{"use strict";s.d(n,{default:()=>i});var t=s(5155);s(2115);var l=s(6199);let i=e=>{let{children:n}=e;return(0,t.jsx)(l.CP,{children:n})}},5455:(e,n,s)=>{"use strict";s.d(n,{default:()=>u});var t=s(5155),l=s(2115),i=s(2619),r=s.n(i),a=s(7260),d=s(6199);function c(){return(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z"})})}function o(){var e,n,s,i,a;let{data:o,status:u}=(0,d.wV)(),m="loading"===u;return(0,l.useEffect)(()=>{"authenticated"===u&&fetch("/api/admin/seen",{method:"POST"}).catch(()=>{})},[u]),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-white",children:(0,t.jsx)(c,{})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xs muted",children:m?"Загрузка…":o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"small",children:"USER ID:"})," ",(0,t.jsx)("span",{className:"font-semibold",children:null!=(a=null!=(i=null!=(s=null==o?void 0:o.discordId)?s:null==o||null==(e=o.user)?void 0:e.email)?i:null==o||null==(n=o.user)?void 0:n.name)?a:"—"})]}):"Личный кабинет"}),(0,t.jsx)("div",{className:"text-base font-semibold leading-tight",children:"Личный кабинет"})]})]}),(0,t.jsx)("div",{className:"mt-3",children:m?null:o?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r(),{href:"/account",className:"btn-ghost inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-sm",children:"Открыть →"}),(0,t.jsx)("button",{onClick:()=>(0,d.CI)(),className:"btn inline-flex items-center gap-1",children:"Выйти"})]}):(0,t.jsx)("button",{onClick:()=>(0,d.Jv)("discord"),className:"btn inline-flex items-center gap-1",children:"Войти →"})})]})}function u(){var e,n,s,i;let[c,u]=(0,l.useState)(!1),m=(0,a.usePathname)(),h=(0,l.useRef)(null),{data:x}=(0,d.wV)(),f=null!=(i=null!=(s=null==x||null==(e=x.user)?void 0:e.id)?s:null==x||null==(n=x.user)?void 0:n.email)?i:null,b="1195944713639960601"===f,[g,p]=(0,l.useState)(!1);function v(e){let{href:n,children:s}=e;return(0,t.jsx)(r(),{href:n,onClick:()=>u(!1),className:"block rounded-lg px-3 py-2 hover:bg-white/10",children:s})}(0,l.useEffect)(()=>{if(!f||b)return void p(!1);(async()=>{try{let s=await fetch("/api/admin/roles",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:[f]}),cache:"no-store"}),t=await s.json().catch(()=>null);if(t&&"ok"in t&&t.ok){var e,n;p(!!(null==(n=t.roles)||null==(e=n[f])?void 0:e.isSuperAdmin))}else p(!1)}catch(e){p(!1)}})()},[f,b]),(0,l.useEffect)(()=>{u(!1)},[m]),(0,l.useEffect)(()=>{var e;return document.body.style.overflow=c?"hidden":"",c&&(null==(e=h.current)||e.focus()),()=>{document.body.style.overflow=""}},[c]),(0,l.useEffect)(()=>{if(!c)return;let e=e=>{"Escape"===e.key&&u(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]);let j=b||g;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(!0),className:"lg:hidden fixed left-4 top-20 z-40 rounded-lg border border-white/6 bg-[rgba(11,14,20,0.5)] px-3 py-2 text-sm backdrop-soft hover:bg-white/6","aria-label":"Открыть меню",children:"☰"}),c&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:()=>u(!1)}),(0,t.jsx)("aside",{className:"fixed left-0 top-0 z-50 h-full w-[320px] transform p-4 text-sm transition-transform ".concat(c?"translate-x-0":"-translate-x-full"," lg:translate-x-0 lg:relative lg:w-auto lg:h-auto lg:top:auto lg:left:auto lg:bg-transparent lg:p-0"),"aria-hidden":!c,children:(0,t.jsxs)("div",{className:"card p-4 bg-opacity-80",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:"Навигация"}),(0,t.jsx)("button",{ref:h,onClick:()=>u(!1),className:"rounded-md px-2 py-1 text-sm btn-ghost","aria-label":"Закрыть меню",children:"✕"})]}),(0,t.jsx)(o,{}),(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[j&&(0,t.jsx)(v,{href:"/admin",children:"Админ-панель"}),(0,t.jsx)(v,{href:"/",children:"Главная"}),(0,t.jsx)("div",{className:"px-3 pt-3 text-xs uppercase muted",children:"Памятки"}),(0,t.jsx)(v,{href:"/memos/gov",children:"Памятки госника"}),(0,t.jsx)(v,{href:"/memos/interrogations",children:"Памятка по допросам"}),(0,t.jsx)(v,{href:"/memos/anti",children:"Памятка против душки"}),(0,t.jsx)("div",{className:"px-3 pt-3 text-xs uppercase muted",children:"Документы"}),(0,t.jsx)(v,{href:"/contracts",children:"Контракты"}),(0,t.jsx)(v,{href:"/weekly",children:"Недельный актив"})]})]})})]})}}},e=>{e.O(0,[2978,2619,6199,8441,1255,7358],()=>e(e.s=4200)),_N_E=e.O()}]);